{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-53c35872\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"h2\", null, \"Kreiranje novog entiteta\"), /*#__PURE__*/_createElementVNode(\"p\", null, \"Popunite trazene karakteristike kako biste kreirali entitet\")], -1 /* HOISTED */));\nconst _hoisted_2 = {\n  style: {\n    \"width\": \"50%\"\n  }\n};\nconst _hoisted_3 = {\n  class: \"table\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Broj\", -1 /* HOISTED */));\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Mesto polaska\", -1 /* HOISTED */));\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Mesto dolaska\", -1 /* HOISTED */));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Maksimalni kapacitet\", -1 /* HOISTED */));\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Cena karte\", -1 /* HOISTED */));\nconst _hoisted_9 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"td\", null, \"Datum i vreme polaska\", -1 /* HOISTED */));\nconst _hoisted_10 = [\"innerHTML\"];\nconst _hoisted_11 = [\"innerHTML\"];\nconst _hoisted_12 = {\n  colspan: \"2\",\n  class: \"text-center\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_datepicker = _resolveComponent(\"datepicker\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_hoisted_1, _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"table\", _hoisted_3, [_createElementVNode(\"tr\", null, [_hoisted_4, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"input-class\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.flight.brojLeta = $event),\n    type: \"text\",\n    placeholder: \"Unesite broj leta...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.flight.brojLeta]])])]), _createElementVNode(\"tr\", null, [_hoisted_5, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"input-class\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.flight.lokOd.adresa = $event),\n    type: \"text\",\n    placeholder: \"Unesite mesto polaska...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.flight.lokOd.adresa]])])]), _createElementVNode(\"tr\", null, [_hoisted_6, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"input-class\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.flight.lokDo.adresa = $event),\n    type: \"text\",\n    placeholder: \"Unesite mesto dolaska...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.flight.lokDo.adresa]])])]), _createElementVNode(\"tr\", null, [_hoisted_7, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.flight.kapacitet = $event),\n    class: \"input-class\",\n    type: \"text\",\n    placeholder: \"Unesite mesto dolaska...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.flight.kapacitet]])])]), _createElementVNode(\"tr\", null, [_hoisted_8, _createElementVNode(\"td\", null, [_withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.flight.cena = $event),\n    class: \"input-class\",\n    type: \"text\",\n    placeholder: \"Unesite mesto dolaska...\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.flight.cena]])])]), _createElementVNode(\"tr\", null, [_hoisted_9, _createElementVNode(\"td\", null, [_createVNode(_component_datepicker, {\n    onSelected: $options.updateDatePicker,\n    modelValue: $data.flight.datumIVreme,\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.flight.datumIVreme = $event)\n  }, null, 8 /* PROPS */, [\"onSelected\", \"modelValue\"])])]), _createElementVNode(\"tfoot\", null, [_createElementVNode(\"tr\", null, [$data.messages.successMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    innerHTML: $data.messages.successMessage,\n    class: \"alert alert-success\"\n  }, null, 8 /* PROPS */, _hoisted_10)) : _createCommentVNode(\"v-if\", true), $data.messages.errorMessage ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 1,\n    innerHTML: $data.messages.errorMessage,\n    class: \"alert alert-error\"\n  }, null, 8 /* PROPS */, _hoisted_11)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"td\", _hoisted_12, [_createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = $event => $options.createNewFlight())\n  }, \"Kreiraj\")])])])])])])]);\n}","map":{"version":3,"mappings":";;gEAEQA,oBAGM,2BAFFA,oBAAiC,YAA7B,0BAAwB,gBAC5BA,oBAAkE,WAA/D,6DAA2D;;EAGzDC,KAAiB,EAAjB;IAAA;EAAA;AAAiB;;EACXC,KAAK,EAAC;AAAO;gEAIZF,oBAAa,YAAT,MAAI;gEAIRA,oBAAsB,YAAlB,eAAa;gEAIjBA,oBAAsB,YAAlB,eAAa;gEAIjBA,oBAA6B,YAAzB,sBAAoB;gEAIxBA,oBAAmB,YAAf,YAAU;gEAIdA,oBAA8B,YAA1B,uBAAqB;;;;EAWjBG,OAAO,EAAC,GAAG;EAACD,KAAK,EAAC;;;;uBA1C9CE,oBAkDM,cAjDFC,UAGM,EACNL,oBA4CM,cA3CFA,oBA0CM,OA1CNM,UA0CM,GAzCFN,oBAwCQ,SAxCRO,UAwCQ,GArCJP,oBAGK,aAFDQ,UAAa,EACbR,oBAA8G,6BAA1GA,oBAAqG;IAA9FE,KAAK,EAAC,aAAa;+DAAUO,YAAM,CAACC,QAAQ;IAAEC,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAAzCH,YAAM,CAACC,QAAQ,SAE1DV,oBAGI,aAFDa,UAAsB,EACtBb,oBAAsH,6BAAlHA,oBAA6G;IAAtGE,KAAK,EAAC,aAAa;+DAAUO,YAAM,CAACK,KAAK,CAACC,MAAM;IAAEJ,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA7CH,YAAM,CAACK,KAAK,CAACC,MAAM,SAE/Df,oBAGK,aAFDgB,UAAsB,EACtBhB,oBAAsH,6BAAlHA,oBAA6G;IAAtGE,KAAK,EAAC,aAAa;+DAAUO,YAAM,CAACQ,KAAK,CAACF,MAAM;IAAEJ,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA7CH,YAAM,CAACQ,KAAK,CAACF,MAAM,SAE/Df,oBAGK,aAFDkB,UAA6B,EAC7BlB,oBAAmH,6BAA/GA,oBAA0G;+DAA1FS,YAAM,CAACU,SAAS;IAAEjB,KAAK,EAAC,aAAa;IAACS,IAAI,EAAC,MAAM;IAACC,WAAW,EAAC;iDAA9DH,YAAM,CAACU,SAAS,SAExCnB,oBAGK,aAFDoB,UAAmB,EACnBpB,oBAA+G,6BAA3GA,oBAAsG;+DAAtFS,YAAM,CAACY,IAAI;IAAEnB,KAAK,EAAC,aAAa;IAACS,IAAI,EAAC,MAAM;IAAEC,WAAW,EAAC;iDAA1DH,YAAM,CAACY,IAAI,SAEnCrB,oBAOK,aANDsB,UAA8B,EAC9BtB,oBAIK,aAHDuB,aAEaC;IAFAC,UAAQ,EAAEC,yBAAgB;gBAAWjB,YAAM,CAACkB,WAAW;+DAAlBlB,YAAM,CAACkB,WAAW;6DAK5E3B,oBAQQ,gBAPJA,oBAMK,aALUS,cAAQ,CAACmB,cAAc,kBAAlCxB,oBAAuG;;IAAnEyB,SAAgC,EAAxBpB,cAAQ,CAACmB,cAAc;IAAE1B,KAAK,EAAC;6EAChEO,cAAQ,CAACqB,YAAY,kBAAhC1B,oBAAiG;;IAA/DyB,SAA8B,EAAtBpB,cAAQ,CAACqB,YAAY;IAAE5B,KAAK,EAAC;6EACvEF,oBAEK,MAFL+B,WAEK,GADD/B,oBAAmD;IAA1CgC,OAAK,sCAAEN,wBAAe;KAAI,SAAO","names":["_createElementVNode","style","class","colspan","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","_hoisted_4","$data","brojLeta","type","placeholder","_hoisted_5","lokOd","adresa","_hoisted_6","lokDo","_hoisted_7","kapacitet","_hoisted_8","cena","_hoisted_9","_createVNode","_component_datepicker","onSelected","$options","datumIVreme","successMessage","innerHTML","errorMessage","_hoisted_12","onClick"],"sourceRoot":"","sources":["C:\\Users\\SNSBOT\\Desktop\\XML-2023[PROJEKAT]\\APP2-front\\planetickets\\src\\components\\NoviLet.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div>\r\n            <h2>Kreiranje novog entiteta</h2>\r\n            <p>Popunite trazene karakteristike kako biste kreirali entitet</p>\r\n        </div>\r\n        <div>\r\n            <div style=\"width:50%\">\r\n                <table class=\"table\">\r\n\r\n\r\n                    <tr>\r\n                        <td>Broj</td>\r\n                        <td><input class=\"input-class\" v-model=\"flight.brojLeta\" type=\"text\" placeholder=\"Unesite broj leta...\" ></td>\r\n                    </tr>\r\n                     <tr>\r\n                        <td>Mesto polaska</td>\r\n                        <td><input class=\"input-class\" v-model=\"flight.lokOd.adresa\" type=\"text\" placeholder=\"Unesite mesto polaska...\" ></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Mesto dolaska</td>\r\n                        <td><input class=\"input-class\" v-model=\"flight.lokDo.adresa\" type=\"text\" placeholder=\"Unesite mesto dolaska...\" ></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Maksimalni kapacitet</td>\r\n                        <td><input v-model=\"flight.kapacitet\" class=\"input-class\" type=\"text\" placeholder=\"Unesite mesto dolaska...\" ></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Cena karte</td>\r\n                        <td><input v-model=\"flight.cena\" class=\"input-class\" type=\"text\"  placeholder=\"Unesite mesto dolaska...\" ></td>\r\n                    </tr>\r\n                    <tr>\r\n                        <td>Datum i vreme polaska</td>\r\n                        <td>\r\n                            <datepicker @selected=\"updateDatePicker\" v-model=\"flight.datumIVreme\">\r\n\r\n                            </datepicker>\r\n                        </td>\r\n                    </tr>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <div v-if=\"messages.successMessage\" v-html=\"messages.successMessage\" class=\"alert alert-success\"></div>\r\n                            <div v-if=\"messages.errorMessage\" v-html=\"messages.errorMessage\" class=\"alert alert-error\"></div>\r\n                            <td colspan=\"2\" class=\"text-center\">\r\n                                <button @click=\"createNewFlight()\">Kreiraj</button>\r\n                            </td>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n\r\n\r\n\r\n</template>\r\n\r\n<script>\r\n\r\nimport parserMixin from '@/mixins/mixin' \r\nimport dataService from '../services/dataService'\r\nimport VueDatePicker from '@vuepic/vue-datepicker';\r\nimport moment from 'moment'\r\n\r\nimport {YandexMap, YandexMarker} from \"vue-yandex-maps\"\r\nimport { loadYmap } from \"vue-yandex-maps\";\r\n\r\nexport default {\r\n    components:{\r\n        datepicker:VueDatePicker,\r\n        YandexMap, YandexMarker,\r\n    },\r\n    data(){\r\n        return{\r\n            //Polja u Klasi Let\r\n\r\n            // private String id;\r\n\t\r\n            // private Adresa lokOd;\r\n            // private Adresa lokDo;\r\n            \r\n            // private String brojLeta;\r\n            // private int kapacitet;\r\n            // private double cena;\r\n            // private LocalDateTime datumIVreme;\r\n            // @DBRef\r\n            // @Nullable\r\n            // private Collection<RegKor> listaPutnika;\r\n            settings: {\r\n                apiKey: \"5e04929d-e957-4fdd-b85c-08e60b3cb3f0\",\r\n                lang: \"en_US\",\r\n                coordorder: \"latlong\",\r\n                enterprise: false,\r\n                version: \"2.1\",\r\n            },\r\n            messages:{\r\n                successMessage:'',\r\n                errorMessage:'',\r\n                \r\n                errorLokOd:'',\r\n                errorLokDo:'',\r\n                errorTermin:'',\r\n                errorBrLet:'',\r\n                errorKapacitet:'',\r\n                errorCena:'',\r\n            },\r\n            flight:{\r\n                lokOd: new Object(),\r\n                lokDo: new Object(),\r\n                //ovo bi trebalo generisati automatski al ajd\r\n                brojLeta: -1,\r\n                kapacitet: -1,\r\n                cena: -1,\r\n                datumIVreme: new Date(),\r\n            },\r\n            lokacija: new Object(),\r\n        }\r\n    },\r\n    async mounted(){\r\n        await loadYmap({ ...this.settings, format: \"json\", debug: true});\r\n    },\r\n    created(){\r\n\r\n    },\r\n    methods:{\r\n        updateDatePicker(val1){\r\n            console.log(\"VAL1: \"  + val1);\r\n            let tempDatum = moment(val1).format('YYYY-MM-DD');\r\n            console.log(\"TEMP DATUM: \"  + tempDatum);\r\n            this.flight.datumIVreme = tempDatum;\r\n        },\r\n        async createNewFlight(){\r\n            console.log(\"ODREDJIVANJE KOORDINATA\");\r\n            await this.getCoordsFromAdresa(this.flight.lokOd.adresa);\r\n            this.flight.lokOd.lat = this.lokacija.lat;\r\n            this.flight.lokOd.lng = this.lokacija.lng;\r\n\r\n            await this.getCoordsFromAdresa(this.flight.lokDo.adresa);\r\n            this.flight.lokDo.lat = this.lokacija.lat;\r\n            this.flight.lokDo.lng = this.lokacija.lng;\r\n\r\n            console.log(\"RUTA: \" + JSON.stringify(this.flight.lokOd));\r\n\r\n            dataService.createNewFlight(this.flight).then(response => {\r\n                console.log(\"KREIRAN LET\");\r\n                if(response.status === 200){\r\n                    this.messages.successMessage = '<h4>Uspesno dodat let</h4>'\r\n                    setTimeout(() => {\r\n                        this.messages.successMessage = '';\r\n                        this.$router.push(`/dash`);\r\n                    });\r\n                }else{\r\n                    this.messages.errorMessage = '<h4>Doslo je do greske!</h4>'\r\n                    setTimeout(() => {\r\n                        this.messages.errorMessage = '';\r\n                    });\r\n                }\r\n            });\r\n        },\r\n        async getCoordsFromAdresa(adresa){\r\n            console.log(\"ADRESA: \" + adresa)\r\n            return ymaps.geocode(adresa).then((result) => {\r\n                let locationCoords = {\r\n                    coords: result.geoObjects.get(0).geometry.getCoordinates(),\r\n                };\r\n                this.lokacija.lat = locationCoords.coords[0];\r\n                this.lokacija.lng = locationCoords.coords[1];\r\n                console.log(\"LOKACIJA: \" + JSON.stringify(this.lokacija));\r\n            });\r\n        }\r\n    }\r\n    \r\n}\r\n</script>\r\n\r\n\r\n<style scoped>\r\n\r\n.table{\r\n    font-family: Arial, Helvetica, sans-serif;\r\n    margin-left: 20px;\r\n}\r\n.table tr:nth-child(even){\r\n    background-color: aquamarine;\r\n}\r\n.table td:nth-child(1){\r\n    width:30%;\r\n    font-size: 20px;\r\n    font-weight: 600;\r\n}\r\n.table td:nth-child(2){\r\n    width:100%;\r\n}\r\n.table td>input{\r\n    width:100%;\r\n}\r\n\r\n</style>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}